<!DOCTYPE html>
<html lang="en">

<head>

	<!-- Page style and script -->
	<script type='application/javascript' src='http://demo.insidemaps.com/apis/build/imapi.min.js'></script>

	<title>InsideMaps AAM Demo</title>

	<style>
		.content-container {
			position: relative;
			width: 946px;
			height: 582px;
			display: block;
			margin-left: auto;
			margin-right: auto;
		}

		.virtual-tour-container {
			position: relative;
			width: 100%;
			height: 90%;
		}

		.debug-container {
			background-color: #D3D3D3;
			padding-top: 15px;
			width: 100%;
			height: 10%;
			text-align: center;
		}

	</style>

</head>

<body onload="init()">

	<div class="content-container">
		<!-- div for api iframe -->
		<div id="insidemaps-virtual-tour" class="virtual-tour-container"></div>

		<div id="camera-position" class="debug-container"></div>
	</div>

	<script>

		function init() {

			var virtualTour = new InsideMaps.VirtualTour();
			virtualTour.init({
				domTargetId: 'insidemaps-virtual-tour',
				host: 'http://demo.insidemaps.com',  // defaults to www.insidemaps.com
				model: 'Australia',
				// offline: true
			})

			.then( function( data ) {
				virtualTour.addCameraEventListener( onCameraUpdate );
			});

		}

		function vectorToString( vector ) {

			var x = parseFloat( vector.x ).toFixed( 2 );
			var y = parseFloat( vector.y ).toFixed( 2 );
			var z = parseFloat( vector.z ).toFixed( 2 );

			return 'x: ' + x + ', y: ' + y + ', z: ' + z;

		}

		function onCameraUpdate( cameraData ) {

			var content = '<b>Camera Position:</b> ' + vectorToString( cameraData.position ) + '</br>';
			content += '<b>Look At:</b> ' + vectorToString( cameraData.lookAt );

			var cameraDiv = document.getElementById( 'camera-position' );
			cameraDiv.innerHTML = content;

		}

	</script>

</body>

</html>
